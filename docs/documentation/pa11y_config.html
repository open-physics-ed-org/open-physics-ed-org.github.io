<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>WCAG checking with pa11y integration</title>
  
  <link rel="icon" href="static/images/favicon.ico">
  <link rel="stylesheet" href="../css/theme-dark.css" id="theme-css">
  <script src="../js/main.js" defer></script>
</head>
<body>
  <header class="site-header">
  <div class="header-flex">
    <img src="../images/logo.png" alt="Site Logo" class="site-logo" />
    <div class="header-titles">
      <h1 class="site-title">Open Physics Education</h1>
      <h2 class="site-subtitle">Open, accessible, and community-driven physics education.</h2>
    </div>
    <!-- Theme toggle button moved to main content container in baseof.html -->
  </div>
  <nav class="site-nav" role="navigation" aria-label="Main menu">
    <ul class="nav-menu">
      
        <li><a href="../index.html">Home</a></li>
      
        <li><a href="../news-roll/index.html">News</a></li>
      
        <li><a href="../sample-resources/index.html">Example</a></li>
      
        <li><a href="index.html">Docs</a></li>
      
        <li><a href="../about/index.html">About</a></li>
      
    </ul>
  </nav>
</header>
  <main id="main-content" tabindex="-1">
    <div class="container">
      <button id="theme-toggle" aria-label="Switch theme" class="theme-toggle">🌙
        <span class="visually-hidden">Toggle dark/light theme</span>
      </button>
      <span id="accessibility-report-placeholder"></span>
      
  <article>
    
    <nav class="download-nav" role="navigation" aria-label="Download options">
      
        <a href="../files/documentation/pa11y_config.pdf"
           class="download-btn theme-download-pdf"
           role="button"
           aria-label="Download as PDF">
          PDF
        </a>
      
        <a href="../files/documentation/pa11y_config.docx"
           class="download-btn theme-download-docx"
           role="button"
           aria-label="Download as Word">
          Word
        </a>
      
        <a href="../files/documentation/pa11y_config.tex"
           class="download-btn theme-download-tex"
           role="button"
           aria-label="Download as LaTeX">
          LaTeX
        </a>
      
        <a href="../files/documentation/pa11y_config.md"
           class="download-btn theme-download-md"
           role="button"
           aria-label="Download as Markdown">
          Markdown
        </a>
      
        <a href="../files/documentation/pa11y_config.txt"
           class="download-btn theme-download-txt"
           role="button"
           aria-label="Download as Plain Text">
          Plain Text
        </a>
      
    </nav>
    
    <h1>WCAG checking with pa11y integration</h1>
    
    <p>Pa11y is a powerful accessibility testing tool that offers extensive JSON configuration capabilities for diverse testing scenarios. This guide provides comprehensive coverage of configuration options, real-world examples, and implementation patterns for various use cases.</p>
<h2>JSON Configuration Structure</h2>
<p>Pa11y supports two primary configuration formats: <strong>pa11y.json</strong> for command-line usage and <strong>.pa11yci</strong> for CI/CD environments. Both use identical JSON schema with flexible option inheritance.</p>
<h3>Basic Configuration Format</h3>
<pre><code class="language-json">{
  &quot;defaults&quot;: {
    &quot;timeout&quot;: 30000,
    &quot;standard&quot;: &quot;WCAG2AA&quot;,
    &quot;viewport&quot;: {
      &quot;width&quot;: 1280,
      &quot;height&quot;: 1024
    },
    &quot;ignore&quot;: [&quot;notice&quot;, &quot;warning&quot;]
  },
  &quot;urls&quot;: [
    &quot;https://example.com&quot;,
    {
      &quot;url&quot;: &quot;https://example.com/special&quot;,
      &quot;timeout&quot;: 60000,
      &quot;actions&quot;: [&quot;click element #menu-toggle&quot;]
    }
  ]
}
</code></pre>
<h2>Complete Configuration Options Reference</h2>
<h3>Core Testing Options</h3>
<p><strong><code>standard</code></strong> (String): Accessibility standard to test against</p>
<ul role="list">
<li role="listitem">Values: <code>&quot;WCAG2A&quot;</code>, <code>&quot;WCAG2AA&quot;</code>, <code>&quot;WCAG2AAA&quot;</code>, <code>&quot;Section508&quot;</code></li>
<li role="listitem">Default: <code>&quot;WCAG2AA&quot;</code></li>
<li role="listitem">Note: Section 508 is deprecated; use WCAG2AA instead</li>
</ul>
<p><strong><code>runners</code></strong> (Array): Testing engines to use</p>
<ul role="list">
<li role="listitem">Values: <code>[&quot;htmlcs&quot;]</code>, <code>[&quot;axe&quot;]</code>, <code>[&quot;htmlcs&quot;, &quot;axe&quot;]</code></li>
<li role="listitem">Default: <code>[&quot;htmlcs&quot;]</code></li>
<li role="listitem">Multiple runners provide comprehensive coverage</li>
</ul>
<p><strong><code>actions</code></strong> (Array): Pre-test interactive actions</p>
<ul role="list">
<li role="listitem">Format: Array of action strings</li>
<li role="listitem">Available commands: <code>click element</code>, <code>set field</code>, <code>wait for element</code>, <code>navigate to</code></li>
<li role="listitem">Essential for testing authenticated or dynamic content</li>
</ul>
<h3>Browser and Performance Controls</h3>
<p><strong><code>timeout</code></strong> (Number): Maximum test duration in milliseconds</p>
<ul role="list">
<li role="listitem">Default: <code>30000</code> (30 seconds)</li>
<li role="listitem">Range: <code>1000</code> to <code>500000</code> for complex applications</li>
</ul>
<p><strong><code>viewport</code></strong> (Object): Browser window configuration</p>
<ul role="list">
<li role="listitem">Properties: <code>width</code>, <code>height</code>, <code>deviceScaleFactor</code>, <code>isMobile</code></li>
<li role="listitem">Default: <code>{&quot;width&quot;: 1280, &quot;height&quot;: 1024}</code></li>
</ul>
<p><strong><code>chromeLaunchConfig</code></strong> (Object): Chrome browser launch options</p>
<ul role="list">
<li role="listitem">Critical for Docker/CI environments</li>
<li role="listitem">Common args: <code>[&quot;--no-sandbox&quot;, &quot;--disable-dev-shm-usage&quot;]</code></li>
</ul>
<h3>Issue Management</h3>
<p><strong><code>ignore</code></strong> (Array): Rules or issue types to exclude</p>
<ul role="list">
<li role="listitem">Format: Specific rule codes or general types</li>
<li role="listitem">Examples: <code>[&quot;WCAG2AA.Principle1.Guideline1_1.1_1_1.H30.2&quot;, &quot;warning&quot;]</code></li>
</ul>
<p><strong><code>threshold</code></strong> (Number): Maximum allowed issues before failure</p>
<ul role="list">
<li role="listitem">Default: <code>0</code> (strict mode)</li>
<li role="listitem">Useful for gradual accessibility improvements</li>
</ul>
<p><strong><code>level</code></strong> (String): Minimum issue severity to report</p>
<ul role="list">
<li role="listitem">Values: <code>&quot;error&quot;</code>, <code>&quot;warning&quot;</code>, <code>&quot;notice&quot;</code></li>
<li role="listitem">Default: <code>&quot;error&quot;</code></li>
</ul>
<h3>Authentication and Headers</h3>
<p><strong><code>headers</code></strong> (Object): HTTP headers for requests</p>
<ul role="list">
<li role="listitem">Format: Key-value pairs</li>
<li role="listitem">Common use: <code>{&quot;Authorization&quot;: &quot;Bearer token&quot;, &quot;Cookie&quot;: &quot;session=abc123&quot;}</code></li>
</ul>
<p><strong><code>userAgent</code></strong> (String): Custom User-Agent string</p>
<ul role="list">
<li role="listitem">Default: <code>&quot;pa11y/&lt;version&gt;&quot;</code></li>
</ul>
<h2>Accessibility Standards Configuration</h2>
<h3>WCAG Compliance Levels</h3>
<pre><code class="language-json">{
  &quot;defaults&quot;: {
    &quot;standard&quot;: &quot;WCAG2AA&quot;,
    &quot;runners&quot;: [&quot;htmlcs&quot;, &quot;axe&quot;],
    &quot;level&quot;: &quot;error&quot;,
    &quot;includeWarnings&quot;: true,
    &quot;includeNotices&quot;: true
  }
}
</code></pre>
<h3>Custom WCAG 2.1 Rules</h3>
<pre><code class="language-json">{
  &quot;defaults&quot;: {
    &quot;standard&quot;: &quot;WCAG2A&quot;,
    &quot;rules&quot;: [
      &quot;Principle1.Guideline1_4.1_4_6_AAA&quot;,
      &quot;Principle1.Guideline1_3.1_3_1_AAA&quot;
    ]
  }
}
</code></pre>
<h3>Government/Enterprise Compliance</h3>
<pre><code class="language-json">{
  &quot;defaults&quot;: {
    &quot;standard&quot;: &quot;WCAG2AA&quot;,
    &quot;runners&quot;: [&quot;htmlcs&quot;, &quot;axe&quot;],
    &quot;threshold&quot;: 0,
    &quot;level&quot;: &quot;warning&quot;,
    &quot;ignore&quot;: [
      &quot;WCAG2AA.Principle1.Guideline1_4.1_4_3.G18.Fail&quot;
    ]
  }
}
</code></pre>
<h2>Authentication Scenarios</h2>
<h3>Basic Authentication</h3>
<pre><code class="language-json">{
  &quot;defaults&quot;: {
    &quot;headers&quot;: {
      &quot;Authorization&quot;: &quot;Basic dXNlcm5hbWU6cGFzc3dvcmQ=&quot;
    }
  }
}
</code></pre>
<h3>Form-Based Login</h3>
<pre><code class="language-json">{
  &quot;defaults&quot;: {
    &quot;timeout&quot;: 60000,
    &quot;useIncognitoBrowserContext&quot;: false
  },
  &quot;urls&quot;: [
    {
      &quot;url&quot;: &quot;https://example.com/dashboard&quot;,
      &quot;actions&quot;: [
        &quot;navigate to https://example.com/login&quot;,
        &quot;set field #username to testuser&quot;,
        &quot;set field #password to testpass&quot;,
        &quot;click element #login-button&quot;,
        &quot;wait for path to be /dashboard&quot;
      ]
    }
  ]
}
</code></pre>
<h3>Multi-Step Authentication</h3>
<pre><code class="language-json">{
  &quot;urls&quot;: [
    {
      &quot;url&quot;: &quot;https://example.com/secure-area&quot;,
      &quot;actions&quot;: [
        &quot;navigate to https://example.com/login&quot;,
        &quot;set field #username to admin&quot;,
        &quot;set field #password to password123&quot;,
        &quot;click element #login-btn&quot;,
        &quot;wait for element #two-factor-input to be visible&quot;,
        &quot;set field #two-factor-input to 123456&quot;,
        &quot;click element #verify-btn&quot;,
        &quot;wait for path to be /dashboard&quot;
      ]
    }
  ]
}
</code></pre>
<h2>Viewport and Device Testing</h2>
<h3>Mobile-First Testing</h3>
<pre><code class="language-json">{
  &quot;defaults&quot;: {
    &quot;viewport&quot;: {
      &quot;width&quot;: 375,
      &quot;height&quot;: 667,
      &quot;deviceScaleFactor&quot;: 2,
      &quot;isMobile&quot;: true
    }
  }
}
</code></pre>
<h3>Multi-Device Testing</h3>
<pre><code class="language-json">{
  &quot;urls&quot;: [
    {
      &quot;url&quot;: &quot;https://example.com&quot;,
      &quot;viewport&quot;: {&quot;width&quot;: 1920, &quot;height&quot;: 1080}
    },
    {
      &quot;url&quot;: &quot;https://example.com&quot;,
      &quot;viewport&quot;: {&quot;width&quot;: 768, &quot;height&quot;: 1024}
    },
    {
      &quot;url&quot;: &quot;https://example.com&quot;,
      &quot;viewport&quot;: {&quot;width&quot;: 375, &quot;height&quot;: 667}
    }
  ]
}
</code></pre>
<h2>Output Formats and Reporting</h2>
<h3>Multiple Reporter Configuration</h3>
<pre><code class="language-json">{
  &quot;defaults&quot;: {
    &quot;reporters&quot;: [
      &quot;cli&quot;,
      &quot;json&quot;,
      [&quot;pa11y-ci-reporter-html&quot;, {&quot;fileName&quot;: &quot;./report.html&quot;}]
    ]
  }
}
</code></pre>
<h3>Custom Output Paths</h3>
<pre><code class="language-json">{
  &quot;defaults&quot;: {
    &quot;screenCapture&quot;: &quot;screenshots/accessibility-test.png&quot;,
    &quot;reporter&quot;: &quot;json&quot;
  }
}
</code></pre>
<h2>CI/CD Integration Patterns</h2>
<h3>Jenkins Configuration</h3>
<pre><code class="language-json">{
  &quot;defaults&quot;: {
    &quot;chromeLaunchConfig&quot;: {
      &quot;args&quot;: [
        &quot;--no-sandbox&quot;,
        &quot;--disable-setuid-sandbox&quot;,
        &quot;--disable-dev-shm-usage&quot;
      ]
    },
    &quot;timeout&quot;: 30000,
    &quot;threshold&quot;: 0,
    &quot;level&quot;: &quot;error&quot;
  }
}
</code></pre>
<h3>GitHub Actions Optimized</h3>
<pre><code class="language-json">{
  &quot;defaults&quot;: {
    &quot;timeout&quot;: 30000,
    &quot;threshold&quot;: 0,
    &quot;level&quot;: &quot;error&quot;,
    &quot;concurrency&quot;: 2,
    &quot;chromeLaunchConfig&quot;: {
      &quot;args&quot;: [&quot;--no-sandbox&quot;, &quot;--disable-setuid-sandbox&quot;]
    }
  }
}
</code></pre>
<h3>Docker Environment</h3>
<pre><code class="language-json">{
  &quot;defaults&quot;: {
    &quot;chromeLaunchConfig&quot;: {
      &quot;executablePath&quot;: &quot;/usr/bin/google-chrome-stable&quot;,
      &quot;args&quot;: [
        &quot;--no-sandbox&quot;,
        &quot;--disable-dev-shm-usage&quot;,
        &quot;--disable-gpu&quot;,
        &quot;--disable-extensions&quot;
      ]
    }
  }
}
</code></pre>
<h2>Performance and Timing Configurations</h2>
<h3>High-Performance Setup</h3>
<pre><code class="language-json">{
  &quot;defaults&quot;: {
    &quot;timeout&quot;: 500000,
    &quot;wait&quot;: 2000,
    &quot;concurrency&quot;: 4,
    &quot;useIncognitoBrowserContext&quot;: true,
    &quot;chromeLaunchConfig&quot;: {
      &quot;args&quot;: [
        &quot;--disable-background-timer-throttling&quot;,
        &quot;--disable-backgrounding-occluded-windows&quot;,
        &quot;--disable-renderer-backgrounding&quot;
      ]
    }
  }
}
</code></pre>
<h3>Resource-Constrained Environment</h3>
<pre><code class="language-json">{
  &quot;defaults&quot;: {
    &quot;timeout&quot;: 15000,
    &quot;concurrency&quot;: 1,
    &quot;chromeLaunchConfig&quot;: {
      &quot;args&quot;: [&quot;--disable-gpu&quot;, &quot;--disable-extensions&quot;]
    }
  }
}
</code></pre>
<h2>Multi-Page Testing Configurations</h2>
<h3>Site-Wide Testing</h3>
<pre><code class="language-json">{
  &quot;defaults&quot;: {
    &quot;timeout&quot;: 30000,
    &quot;standard&quot;: &quot;WCAG2AA&quot;,
    &quot;hideElements&quot;: &quot;#cookie-banner, .ad-container&quot;,
    &quot;ignore&quot;: [&quot;notice&quot;, &quot;warning&quot;]
  },
  &quot;urls&quot;: [
    &quot;https://example.com/&quot;,
    &quot;https://example.com/about&quot;,
    &quot;https://example.com/contact&quot;,
    {
      &quot;url&quot;: &quot;https://example.com/checkout&quot;,
      &quot;timeout&quot;: 60000,
      &quot;actions&quot;: [
        &quot;navigate to https://example.com/login&quot;,
        &quot;set field #email to test@example.com&quot;,
        &quot;set field #password to testpass&quot;,
        &quot;click element #login-btn&quot;
      ]
    }
  ]
}
</code></pre>
<h3>Sitemap-Based Testing</h3>
<pre><code class="language-bash"># Command usage with configuration
pa11y-ci --sitemap https://example.com/sitemap.xml --config .pa11yci
</code></pre>
<pre><code class="language-json">{
  &quot;defaults&quot;: {
    &quot;timeout&quot;: 30000,
    &quot;threshold&quot;: 5,
    &quot;ignore&quot;: [&quot;notice&quot;, &quot;warning&quot;]
  }
}
</code></pre>
<h2>Custom Rules and Advanced Filtering</h2>
<h3>Comprehensive Issue Management</h3>
<pre><code class="language-json">{
  &quot;defaults&quot;: {
    &quot;standard&quot;: &quot;WCAG2AA&quot;,
    &quot;ignore&quot;: [
      &quot;WCAG2AA.Principle1.Guideline1_4.1_4_3.G18.Fail&quot;,
      &quot;WCAG2AA.Principle1.Guideline1_4.1_4_3.G145.Fail&quot;,
      &quot;WCAG2AA.Principle3.Guideline3_2.3_2_2.H32.2&quot;
    ],
    &quot;hideElements&quot;: &quot;#lc_chat_layout, .third-party-widget&quot;,
    &quot;threshold&quot;: 5,
    &quot;includeWarnings&quot;: true
  }
}
</code></pre>
<h3>Per-URL Custom Rules</h3>
<pre><code class="language-json">{
  &quot;urls&quot;: [
    {
      &quot;url&quot;: &quot;https://example.com/article&quot;,
      &quot;hideElements&quot;: &quot;#carbonads, #disqus_thread&quot;,
      &quot;ignore&quot;: [&quot;WCAG2AA.Principle1.Guideline1_4.1_4_3.G18.Fail&quot;]
    }
  ]
}
</code></pre>
<h2>Environment-Specific Configurations</h2>
<h3>Development Environment</h3>
<pre><code class="language-javascript">// .pa11yci.js for dynamic configuration
module.exports = {
  defaults: {
    timeout: process.env.PA11Y_TIMEOUT || 30000,
    headers: {
      'Authorization': `Bearer ${process.env.AUTH_TOKEN}`
    },
    chromeLaunchConfig: {
      args: process.env.CI ? ['--no-sandbox'] : []
    }
  },
  urls: [
    `${process.env.BASE_URL || 'https://localhost:3000'}/`
  ]
};
</code></pre>
<h3>Production Monitoring</h3>
<pre><code class="language-json">{
  &quot;defaults&quot;: {
    &quot;timeout&quot;: 45000,
    &quot;threshold&quot;: 0,
    &quot;ignore&quot;: [&quot;notice&quot;],
    &quot;screenCapture&quot;: &quot;screenshots/prod-test.png&quot;,
    &quot;headers&quot;: {
      &quot;User-Agent&quot;: &quot;Pa11y-Monitor/1.0&quot;
    }
  }
}
</code></pre>
<h2>Advanced Action Sequences</h2>
<h3>Complex User Flows</h3>
<pre><code class="language-json">{
  &quot;urls&quot;: [
    {
      &quot;url&quot;: &quot;https://example.com/multi-step-form&quot;,
      &quot;actions&quot;: [
        &quot;set field #step1-name to John Doe&quot;,
        &quot;click element #next-step&quot;,
        &quot;wait for element #step2-form to be visible&quot;,
        &quot;set field #step2-email to john@example.com&quot;,
        &quot;click element #submit-form&quot;,
        &quot;wait for path to be /confirmation&quot;,
        &quot;screen capture form-completion.png&quot;
      ]
    }
  ]
}
</code></pre>
<h3>Dynamic Content Testing</h3>
<pre><code class="language-json">{
  &quot;urls&quot;: [
    {
      &quot;url&quot;: &quot;https://example.com/dynamic-content&quot;,
      &quot;actions&quot;: [
        &quot;click element #load-more-button&quot;,
        &quot;wait for element .dynamic-content to be visible&quot;,
        &quot;click element #filter-toggle&quot;,
        &quot;wait for element #filter-options to be visible&quot;
      ]
    }
  ]
}
</code></pre>
<h2>Integration with Testing Frameworks</h2>
<h3>Jest Integration</h3>
<pre><code class="language-javascript">// jest.config.js
module.exports = {
  testEnvironment: 'node',
  setupFilesAfterEnv: ['&lt;rootDir&gt;/test/pa11y.setup.js']
};

// pa11y.setup.js
const pa11y = require('pa11y');
const config = require('./pa11y.json');

global.pa11yTest = async (url, options = {}) =&gt; {
  const results = await pa11y(url, { ...config.defaults, ...options });
  return results;
};
</code></pre>
<h2>Best Practices for Configuration</h2>
<h3>Configuration organization ensures maintainability and clarity across different testing scenarios. <strong>Environment separation</strong> uses different configuration files for development, staging, and production environments. <strong>Modular configuration</strong> breaks complex setups into reusable components with consistent naming conventions.</h3>
<p><strong>Security considerations</strong> require protecting authentication credentials through environment variables and avoiding hardcoded sensitive data in configuration files. <strong>Performance optimization</strong> balances thoroughness with execution time by using appropriate concurrency levels and timeout values.</p>
<p><strong>Maintenance strategies</strong> include regular review of ignore rules to ensure they remain relevant, documentation of custom configurations for team knowledge sharing, and version control of configuration files alongside application code.</p>
<p>This comprehensive configuration guide demonstrates pa11y's extensive flexibility for accessibility testing across diverse scenarios, from basic compliance checking to complex enterprise deployments with authentication, custom rules, and CI/CD integration.</p>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  </article>

    </div>
  </main>
  <footer>
  Made with tons of ☕️  and lots of ❤️ for students and educators everywhere. | Built with <a href="https://github.com/OER-Forge/">OER Forge</a>

</footer>
</body>
</html>